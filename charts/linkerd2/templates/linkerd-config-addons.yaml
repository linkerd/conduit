{- /*
  This config-map is used to store the configuration of add-ons, which is useful during upgrades.
  Some add-ons are enabled by default.
*/ -}}
---
###
### linkerd add-ons configuration
###
---
kind: ConfigMap
apiVersion: v1
metadata:
  name: linkerd-config-addons
  namespace: {{.Values.global.namespace}}
  labels:
    {{.Values.global.controllerNamespaceLabel}}: {{.Values.global.namespace}}
  annotations:
    {{.Values.global.createdByAnnotation}}: {{default (printf "linkerd/helm %s" .Values.global.linkerdVersion) .Values.global.cliVersion}}
data:
  values: |-
    tracing:
      {{- include "linkerd.addons.sanitize-config" .Values.tracing}}
