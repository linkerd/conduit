#!/bin/bash

set -eu

cd "$(pwd -P)"

bindir="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
rootdir="$( cd "$bindir/.." && pwd )"
targetbin="${rootdir}"/target/bin
goimportsbin=${targetbin}/goimports

# install goimports if it does not exist
if [ ! -f "$goimportsbin" ]; then
  GOBIN=$targetbin go install -mod=readonly golang.org/x/tools/cmd/goimports
fi

exec "$goimportsbin" "$@"
